1. implement the update step.
2. review the design (specially using the smart pointers).
